<!--
To rebuild index.md, run:

  pandoc index.md -t html --ascii -o index.html


-->
<h1 id="suggestions-files">Suggestions files</h1>
<h2 id="motivation">Motivation</h2>
<p>Many word processors have built-in change management. Authors can
suggest changes and add comments, then an editor can accept or reject
them.</p>
<figure>
<img src="word-screenshot.png" title="Track changes in Microsoft Word"
style="width:75.0%" alt="Word screenshot" />
<figcaption aria-hidden="true">Word screenshot</figcaption>
</figure>
<p>People who write documents using text-file-based formats like
<strong>TeX</strong> or <strong>markdown</strong> have a problem: text
files don&#x2019;t have a concept of changes. This makes it harder to
collaborate in teams. To get change management, they can:</p>
<ul>
<li>Use an online editor, losing the flexibility of simple text
files;</li>
<li>Use a version control system like <strong>git</strong>, which is
complex and technical.</li>
</ul>
<p><em>Suggestions files</em> are a standard for changes for plain text.
They let authors collaborate, suggest and review changes. They don&#x2019;t
require any special software, and they can be used on any kind of text
file. You just edit the file as usual, and follow some simple rules.</p>
<h2 id="making-suggestions">Making suggestions</h2>
<p>To suggest new text to add to a file, enclose it in <code>++[</code>
and <code>]++</code> tags like this:</p>
<pre><code>The original text, ++[your suggested addition,]++ 
and more text.</code></pre>
<p>To suggest a deletion from a file, enclose it in <code>--[</code> and
<code>]--</code> tags like this:</p>
<pre><code>The original text, --[the section you want to delete,]-- 
and more text.</code></pre>
<p>To make a comment, enclose it in <code>%%[</code> and
<code>[%%</code>:</p>
<pre><code>%%[ This clarifies the argument, right? @stephen ]%%</code></pre>
<p>You can sign the comment with a <code>@handle</code> as the last
word.</p>
<h2 id="reviewing-suggestions">Reviewing suggestions</h2>
<p>To review suggestions:</p>
<ul>
<li>To accept a suggested addition, delete the <code>++[</code> and
matching <code>]++</code>, leaving everything between them.</li>
<li>To accept a suggested deletion, delete everything between
<code>--[</code> and <code>]--</code> inclusive.</li>
</ul>
<p>Rejecting suggestions is just the other way round:</p>
<ul>
<li>To reject an addition, delete everything between <code>++[</code>
and <code>]++</code> inclusive.</li>
<li>To reject a deletion, delete the <code>--[</code> and matching
<code>]--</code>.</li>
</ul>
<p>You can also delete comments. Typically, you will have to do this
before using the text file for another purpose.</p>
<p>If a tag (<code>++[</code>, <code>]++</code>, <code>--[</code>,
<code>]--</code>, <code>%%[</code> or <code>]%%</code>) is on its own on
a line, treat the subsequent newline as part of the tag and delete
it:</p>
<pre><code>A paragraph of text.
++[
A new line.
]++
The paragraph continues.</code></pre>
<p>becomes</p>
<pre><code>A paragraph of text.
A new line.
The paragraph continues.</code></pre>
<p>if the addition is accepted, or</p>
<pre><code>A paragraph of text.
The paragraph continues.</code></pre>
<p>if it is rejected.</p>
<h2 id="multiple-authors-and-nested-suggestions">Multiple authors and
nested suggestions</h2>
<p>If multiple authors are working on a document, you may want to sign
your suggested changes. Do that by putting your handle at the end of the
change, just like for a comment. The handle must start with
<code>@</code> and must be the last word:</p>
<pre><code>   And God said, 
--[Light be made, and the light was made. @tyndale]-- 
++[Let there be lyghte and there was lyghte. @tyndale]++
++[Let there be light: and there was light. @kjv]++</code></pre>
<p>You can nest suggestions within each other:</p>
<pre><code>Last night I dreamt I went to Manderley++[, the famous 
++[Cornish @editor]++ seaside resort, @daphne ]++ again.</code></pre>
<p>You can&#x2019;t nest changes within comments (too confusing). If you want
to add to a comment, just write inside it with your handle. It&#x2019;s only a
comment anyway.</p>
<p>The rules for reviewing nested comments are the same as above. You
may need to adjudicate between different alternatives. Obviously, if you
accept someone&#x2019;s deletion, any other suggestions inside it will be
deleted and be irrelevant.</p>
<h2 id="why-not-just-use-a-diff-file">Why not just use a diff file?</h2>
<p><code>diff</code> is a command that prints the difference between two
text files. It&#x2019;s widely used in the computing world. But diffs are
designed for computers and code, not humans and text:</p>
<ul>
<li>Diff output makes no sense without the original file. You can&#x2019;t read
changes in their original context. A suggestions file shows additions
and deletions in context; it can be sent as an email attachment, read
and understood.</li>
<li>Using and applying diffs requires command line tools. This is hard
for non-technical authors. Suggestions files don&#x2019;t require any command
line tools, but you can <a
href="https://github.com/hughjonesd/suggestions">use one</a> if you
like.</li>
<li>Diffs are typically line oriented. This makes them hard to read when
only a word or phrase has changed.</li>
<li>You can&#x2019;t put comments and authorship in a diff file.</li>
<li>A diff file only shows one set of changes. A suggestions file can
show changes by multiple authors, including nested changes.</li>
</ul>
<h2 id="command-line-tool">Command line tool</h2>
<p>There is a command line tool <code>suggs</code> for working with
suggestions files.</p>
<p>You can use it like this:</p>
<pre><code>suggs colorize file.txt</code></pre>
<p>Prints suggestions file <em>file.txt</em> with additions, deletions
and comments shown in color.</p>
<pre><code>suggs new file.txt</code></pre>
<p>Prints <em>file.txt</em> with all suggestions accepted.</p>
<pre><code>suggs old file.txt</code></pre>
<p>Prints <em>file.txt</em> with all suggestions rejected.</p>
<pre><code>suggs accept file.txt
suggs reject file.txt</code></pre>
<p>Accepts or rejects all changes in-place, writing the result back to
<em>file.txt</em>.</p>
<pre><code>suggs diff old.txt new.txt</code></pre>
<p>Creates a suggestions file from the difference between
<em>old.txt</em> and <em>new.txt</em>.</p>
<h2 id="tips">Tips</h2>
<p>If you write comments like</p>
<pre><code>%%[
% My comment here.
% ]%%</code></pre>
<p>then TeX will also treat them as comments.</p>
